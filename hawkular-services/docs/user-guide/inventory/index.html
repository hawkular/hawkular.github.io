<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Hawkular - Inventory Documentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- css -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../../../css/asciidoctor.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link href="../../../../css/tabzilla.css" rel="stylesheet">
    <link href="../../../../css/styles.css" rel="stylesheet">
    <link href="../../../../css/prettify.css" rel="stylesheet">
    <link href="../../../../css/ekko-lightbox.min.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
    <script src="../../../../js/moment.min.js"></script>
    <script src="../../../../js/jquery-1.11.2.min.js"></script>

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../../../../favicon.ico">
    
  </head>
  <body onload="prettyPrint()" data-spy="scroll" data-offset="80" data-target="#toc">
    <div id="wrap">
      <div class="dropup">
        <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
        <script>
            window.addEventListener('load', function() {
                 renderTabzilla("Hawkular", "https://hawkular.github.io", true );
            }, false);
        </script>
      </div>

    	<!-- Fixed navbar -->
        <nav class="navbar navbar-fixed-top" role="navigation">
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button class="navbar-toggle collapsed" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../">Home</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li><a href="../../../../overview/">Overview</a></li>
                <li><a href="../../../../blog.html">Blog</a></li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Hawkular Services<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                    <li class="menu-item dropdown dropdown-submenu">
                      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation</a>
                      <ul class="dropdown-menu">
                        <li class="menu-item ">
                          <a href="../../../../hawkular-services/docs/quickstart-guide/">Quickstart</a>
                        </li>
                        <li class="menu-item ">
                          <a href="../../../../hawkular-services/docs/installation-guide/">Installation Guide</a>
                        </li>
                        <li class="menu-item ">
                          <a href="../../../../hawkular-services/docs/user-guide/">User Guide</a>
                        </li>
                        <li class="menu-item dropdown dropdown-submenu">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">REST API</a>
                          <ul class="dropdown-menu">
                            <li class="menu-item ">
                              <a href="../../../../docs/rest/rest-alerts.html">Alerting</a>
                            </li>
                            <li class="menu-item ">
                              <a href="../../../../docs/rest/rest-inventory.html">Inventory</a>
                            </li>
                            <li class="menu-item ">
                              <a href="../../../../docs/rest/rest-metrics.html">Metrics</a>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      <a href="https://github.com/hawkular/hawkular-services/releases">Download</a>
                    </li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Hawkular APM<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                    <li>
                      <li><a href="../../../../hawkular-apm/">Overview</a></li>
                    </li>
                    <li>
                      <a href="https://hawkular.gitbooks.io/hawkular-apm-user-guide/content/">Documentation</a>
                    </li>
                    <li>
                      <a href="https://github.com/hawkular/hawkular-apm/releases/">Download</a>
                    </li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Hawkular Metrics<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation</a>
                      <ul class="dropdown-menu">
                        <li class="menu-item ">
                          <a href="../../../../hawkular-metrics/docs/user-guide/">Metrics User Guide</a>
                        </li>
                        <li class="menu-item ">
                            <a href="../../../../community/docs/developer-guide/alerts-v1.html">Alerting User Guide</a>
                        </li>
                        <li class="menu-item ">
                          <a href="../../../../docs/rest/rest-metrics.html">Metrics REST API</a>
                        </li>
                        <li class="menu-item ">
                          <a href="../../../../docs/rest/rest-alerts-v1.html">Alerting REST API</a>
                        </li>
                      </ul>
                  </li>
                    <li>
                      <a href="https://github.com/hawkular/hawkular-metrics/releases/">Download</a>
                    </li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Hawkular Alerting<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation</a>
                      <ul class="dropdown-menu">
                        <li class="menu-item dropdown dropdown-submenu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Alerting User Guide</a>
                            <ul class="dropdown-menu">
                              <li class="menu-item ">
                                <a href="../../../../community/docs/developer-guide/alerts-v1.html">Version 1</a>
                              </li>
                              <li class="menu-item ">
                                <a href="../../../../community/docs/developer-guide/alerts-v2.html">Version 2</a>
                              </li>
                            </ul>
                        </li>
                        <li class="menu-item dropdown dropdown-submenu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Alerting REST API</a>
                            <ul class="dropdown-menu">
                              <li class="menu-item ">
                                <a href="../../../../docs/rest/rest-alerts-v1.html">Version 1</a>
                              </li>
                              <li class="menu-item ">
                                <a href="../../../../docs/rest/rest-alerts-v2.html">Version 2</a>
                              </li>
                            </ul>
                        </li>
                      </ul>
                  </li>
                    <li>
                      <a href="https://github.com/hawkular/hawkular-alerts/releases/">Download</a>
                    </li>
                  </ul>
                </li>
                <li><a href="../../../../hawkular-clients/">Hawkular Clients</a></li>
                <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                  Community
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="../../../../community/docs/getting-involved/">Getting Involved</a>
                  </li>
                  <li class="menu-item ">
                    <a href="../../../../community/docs/developer-guide/">Developer Guide</a>
                  </li>
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Labs</a>
                      <ul class="dropdown-menu">
                        <li class="menu-item ">
                          <a href="../../../../community/labs/datamining/">Datamining</a>
                        </li>
                        <li class="menu-item ">
                          <a href="https://github.com/pilhuhn/hawkfx">HawkFX</a>
                        </li>
                        <li class="menu-item ">
                          <a href="../../../../hawkular-clients/android-client/">Android client</a>
                        </li>
                        <li class="menu-item ">
                          <a href="https://github.com/jotak/hawkular-java-toolbox">Client-side java toolbox</a>
                        </li>
                      </ul>
                  </li>
                  <li>
                    <a href="https://github.com/hawkular">GitHub Repositories</a>
                  <li>
                    <a href="https://travis-ci.org/hawkular">CI Builds</a>
                  </li>
                </ul></li>
              </ul>
            </div>
          </div>
        </nav>

      <section class="main-banner">
        <div class="container">
          <h1>Inventory Documentation</h1>
          <p></p>
<!-- show tags for this page -->
   <p> 
      <a href="/tags/inventory.html">inventory</a> 
  </p>
        </div>

      </section>

	<!--<p><em>05 January 2016</em></p>-->

	<section>
      <div class="container">
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#types-of-entities">Types of Entities</a>
<ul class="sectlevel2">
<li><a href="#tenant">Tenant</a></li>
<li><a href="#environment">Environment</a></li>
<li><a href="#resource">Resource</a></li>
<li><a href="#metric">Metric</a></li>
<li><a href="#resource-type">Resource Type</a></li>
<li><a href="#metric-type">Metric Type</a></li>
<li><a href="#operation-type">Operation Type</a></li>
<li><a href="#feed">Feed</a></li>
<li><a href="#data-entity">Data Entity</a></li>
<li><a href="#metadata-pack">Metadata Pack</a></li>
</ul>
</li>
<li><a href="#inventory-organization">Inventory Organization</a>
<ul class="sectlevel2">
<li><a href="#basic-principles">Basic Principles</a></li>
</ul>
</li>
<li><a href="#identity-hashing">Identity Hashing</a></li>
<li><a href="#configuration">Configuration</a>
<ul class="sectlevel2">
<li><a href="#locating-config-file">Locating Configuration File</a></li>
<li><a href="#configuration-properties">Configuration Properties</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Inventory is simply a registry of "things" that Hawkular knows about. It
contains info about your applications, servers, etc. It also keeps track of
their relationships with each other.</p>
</div>
<div class="paragraph">
<p>As such inventory is a graph where nodes are the "things" or "resources" you
monitor and manage in Hawkular and edges are relationships between those
resources.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="types-of-entities">Types of Entities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To help with classification of the resources you want to monitor, inventory
understands a couple of other types of entities.</p>
</div>
<div class="sect2">
<h3 id="tenant">Tenant</h3>
<div class="paragraph">
<p>Tenants are units of data separation. There may be no relationships between
entities in different tenants.</p>
</div>
<div class="paragraph">
<p>From the point of view of the REST API user, tenants are invisible, because they
are directly deduced from the login credentials (+ optionally a persona) passed
in the request.</p>
</div>
</div>
<div class="sect2">
<h3 id="environment">Environment</h3>
<div class="paragraph">
<p>Environments correspond to the common deployment policies in the enterprise
where for example applications are developed in an "development" environment and
then are promoted to "test", "staging" and finally to "production".</p>
</div>
</div>
<div class="sect2">
<h3 id="resource">Resource</h3>
<div class="paragraph">
<p>A resource, as already hinted in the <a href="#Introduction">Introduction</a>, is the representation of
the "thing" in your infrastructure that is being monitored and managed by
Hawkular.</p>
</div>
<div class="paragraph">
<p>Most importantly, a resource references metrics that are relevant to it. Notice
that metrics are standalone entities that can exist even without a resource
referencing them though and that there is essentially an M to N mapping between
resources and metrics (meaning that a single metric can be referenced by
multiple resources).</p>
</div>
<div class="paragraph">
<p>The idea behind this separation is that metrics represent concrete qualities
or measurements being collected while resources are essentially only a logical
concept that may or may not correspond to an actual piece of software deployed
on some machine.</p>
</div>
<div class="paragraph">
<p>This is best imagined if you consider the resources as things you yourself can
compose on your own. For example you might want to create a resource "Health
Indicators" for which you would pick and choose several metrics collected
possibly on several machines representing the health of your infrastructure.</p>
</div>
<div class="paragraph">
<p>To make things slightly more complicated though, metrics CAN also be contained
within a resource. This is mainly useful for feeds that want to model the fact
that a metric cannot exist without a resource in question. Such metrics still can
be incorporated into othe resources but as soon as the containing resource is
deleted, the resources that incorporate the metric "lose" it.</p>
</div>
<div class="paragraph">
<p>Resources can have configuration. A configuration is JSON document that the
feed can take and apply in some manner to the target resource that it is managing.</p>
</div>
<div class="paragraph">
<p>A resource can also have a connection configuration. This describes to the feed
how to connect to the managed resource.</p>
</div>
<div class="paragraph">
<p>The two types of configurations are described by <a href="#data-entity">data entities</a>
with possible IDs <code>configuration</code> or <code>connectionConfiguration</code> that are contained
in the resource entities.</p>
</div>
</div>
<div class="sect2">
<h3 id="metric">Metric</h3>
<div class="paragraph">
<p>Each resource can have a number of metrics associated with it. As an example,
we can monitor the <code>response time</code> on an URL. While the actual data, i.e. the
individual measurements of the response time, are being stored in
<a href="../metrics/index.html">Hawkular Metrics</a>, the definition of the metric is
held in inventory, too. This is to keep track of what resources are composed of.</p>
</div>
<div class="paragraph">
<p>Notice though that resources do not have to "own" their metrics. Rather, an m-to-n
relationship can exist between the two, meaning that a single metric can be
incorporated into several resources (or none). Please refer to
<a href="#resource">Resource chapter</a> for more detailed discussion of this.</p>
</div>
</div>
<div class="sect2">
<h3 id="resource-type">Resource Type</h3>
<div class="paragraph">
<p>A resource type provides metadata about resources - i.e. what metrics they
support what are the operations one can execute on them and with what kind of
parameters, etc.</p>
</div>
<div class="paragraph">
<p>Each resource (i.e. thing being monitored and managed by Hawkular) has to have
a resource type.</p>
</div>
<div class="paragraph">
<p>As with resources and metrics, resource types can reference metric types which
define the metadata of the metrics to be referenced by the resources. As with
resources and metrics, resource types and metric types are separate standalone
entities with m-to-n relationships.</p>
</div>
<div class="paragraph">
<p>Resource types can also contain 2 kinds of data entities - either
<code>configurationSchema</code> or <code>connectionConfigurationSchema</code>. The former is a JSON
schema document describing the format of the configuration of the resources of
this type, while the latter describes the format of the connection configuration
of the resources. See <a href="#resource">Resource chapter</a> for what those are in
more detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="metric-type">Metric Type</h3>
<div class="paragraph">
<p>Metric type defines metadata of a metric. Namely it is its unit and data type
(gauge, counter, &#8230;&#8203;).</p>
</div>
</div>
<div class="sect2">
<h3 id="operation-type">Operation Type</h3>
<div class="paragraph">
<p>Resource types can define types of operations that can be executed on resources
of those types. The operation types define the format of the return values
as well as the format of the parameters accepted.</p>
</div>
</div>
<div class="sect2">
<h3 id="feed">Feed</h3>
<div class="paragraph">
<p>A feed is a representation of an "agent" that collects monitoring data and
performs management operations. Feeds also report on the metrics and resources
(along with their types) it found in the place they are running.</p>
</div>
<div class="paragraph">
<p>In other words, the feeds are supposed to "own" both their data and metadata.
Inventory is clever enough to figure out if 2 feeds declare the same metadata
and consider it the same. On the other hand, the 2 feeds are not required to
synchronize their data and metadata in any way.</p>
</div>
</div>
<div class="sect2">
<h3 id="data-entity">Data Entity</h3>
<div class="paragraph">
<p>A data entity holds a JSON value. It can be contained in a variety of other
entities (resource types, resource, operation types) and the ID of the data
entity defines its "purpose" in the containing entity. E.g. operation types
can have data entities with ID either <code>returnType</code> or <code>parameterTypes</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="metadata-pack">Metadata Pack</h3>
<div class="paragraph">
<p>A metadata pack is a means of grouping resource types and metric types together
and ensuring they do not change. If a metadata pack with a certain "identity hash"
exists, the users can be sure that a set of resource types and metric types with
the exact configuration schemas, units, operation types, etc. are also defined. As
such a metadata pack is a means of quickly making sure that other metadata exists
in a way the user expects.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inventory-organization">Inventory Organization</h2>
<div class="sectionbody">
<div id="img-inventory-organization" class="imageblock" style="text-align: center">
<div class="content">
<img src="/img/docs/components/inventory/index/inventory-entity-diagram.png" alt="Inventory Organization">
</div>
<div class="title">Figure 1. Inventory Organization</div>
</div>
<div class="paragraph">
<p>For the textually inclined, here&#8217;s a description of the above diagram as a tree (frankly, this is now more readable than the above
automatically generated diagram):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code><a href="#tenant">Tenant</a></code></p>
<div class="ulist">
<ul>
<li>
<p>1 <code>contains</code> 0..N <code><a href="#environment">Environment</a></code>, <code><a href="#feed">Feed</a></code>, <code><a href="#resource-type">Resource Type</a></code>, <code><a href="#metric-type">Metric Type</a></code>,
<code><a href="#metadata-pack">Metadata Pack</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code><a href="#environment">Environment</a></code></p>
<div class="ulist">
<ul>
<li>
<p>1 <code>contains</code> 0..N <code><a href="#resource">Resource</a></code>, <code><a href="#metric">Metric</a></code></p>
<div class="paragraph">
<p>Resources and metrics can exist at 2 places. Either directly under an environment, which is where custom user-defined resources and
metric can live. Resources and metrics can also live under feed entities where they are placed by the connecting feeds when they
report the data they have discovered.</p>
</div>
</li>
<li>
<p>0..1 <code>incorporates</code> 0..N <code><a href="#feed">Feed</a></code></p>
<div class="paragraph">
<p>Environment can express that it is composed of a number of feeds. A feed on the other hand can only be incorporated in at most 1
environment at a time.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code><a href="#feed">Feed</a></code></p>
<div class="ulist">
<ul>
<li>
<p>1 <code>contains</code> 0..N <code><a href="#resource-type">Resource Type</a></code>, <code><a href="#metric-type">Metric Type</a></code>, <code><a href="#resource">Resource</a></code>, <code><a href="#metric">Metric</a></code></p>
<div class="paragraph">
<p>Feeds represent the "things" that report data and metadata. Feeds can be associated with (at most 1 at a time) environment but they
don&#8217;t have to. To move a feed from one environment to another, simply remove the "incorporates" association with the first enviroment
and create a new one with another environment.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code><a href="#resource-type">Resource Type</a></code></p>
<div class="ulist">
<ul>
<li>
<p>1 <code>contains</code> 0..2 <code><a href="#data-entity">Data Entity</a></code></p>
<div class="paragraph">
<p>A resource type can contain a data entity with ID <code>configurationSchema</code> defining a JSON schema for <code>configuration</code> of resources that
are defined by this resource type or <code>connectionConfigurationSchema</code> which is a JSON schema for <code>connectionConfiguration</code> of the
resources (which defines how the feed connects to the resource in question, whatever that may mean for a given resource and feed).</p>
</div>
</li>
<li>
<p>1 <code>contains</code> 0..N <code><a href="#operation-type">Operation Type</a></code></p>
<div class="paragraph">
<p>Resource types define the types of operations that should be executable on the resources of the type.</p>
</div>
</li>
<li>
<p>1 <code>defines</code> 0..N <code><a href="#resource">Resource</a></code></p>
<div class="paragraph">
<p>A resource type defines resources. This means that the users can reasonably assume that the data on the resource correspond to the
metadata defined at the resource type (i.e. that the configurations on the resource correspond to the schemas defined at the resource
type and that the resource incorporates the metrics with the metric types that are incorporated by the resource type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A resource MUST be defined by exactly 1 resource type. It is not possible to "re-declare" a resource type of a resource.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Conformance of the resource data to the schemas is currently not enforced, so it&#8217;s only informational.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>1 <code>incorporates</code> 0..N <code><a href="#metric-type">Metric Type</a></code></p>
<div class="paragraph">
<p>By incorporating a metric type, the resource type declares that the users can expect the resources of this type to incorporate metrics
of the metric type.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This is currently not enforced, so its only informational.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code><a href="#metric-type">Metric Type</a></code></p>
<div class="ulist">
<ul>
<li>
<p>1 <code>defines</code> 0..N <code><a href="#metric">Metric</a></code></p>
<div class="paragraph">
<p>Similarly to how a resource must have a resource type, each metric must have a single metric type. The metric type defines the unit
of the metric as well as default collection interval and other metadata about the metric.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code><a href="#operation-type">Operation Type</a></code></p>
<div class="ulist">
<ul>
<li>
<p>1 <code>contains</code> 0..2 <code><a href="#data-entity">Data Entity</a></code></p>
<div class="paragraph">
<p>Similarly to how resource type defines the <code>configurationSchema</code> and <code>connectionConfigurationSchema</code>, the operation type defines 2
schemas for a return type (the data entity has ID <code>returnType</code>) and parameter types (the data entity has ID <code>parameterTypes</code>).</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code><a href="#resource">Resource</a></code></p>
<div class="ulist">
<ul>
<li>
<p>0..1 <code>contains</code> 0..N <code><a href="#resource">Resource</a></code></p>
<div class="paragraph">
<p>A resource can contain other resources. This is a "existential" relationship meaning that if a parent resource is deleted, so are
its child resources.</p>
</div>
</li>
<li>
<p>0..M <code>isParentOf</code> 0..N <code><a href="#resource">Resource</a></code></p>
<div class="paragraph">
<p>In addition to defining the resource hierarchy using the existential containment of resources in each other, there can exist other
more free form hierarchies realized using the <code>isParentOf</code> relationship (each contained resource is also "parented" using this
relationship automagically). This enables the users to create "alternative hierarchies" across feeds or environments, etc.</p>
</div>
<div class="paragraph">
<p>As opposed to <code>contains</code> relationship which forms a strict tree in the Inventory, <code>isParentOf</code> is allowed to create "diamonds", i.e. 1
resource is allowed to have 2 or more parents. It is not allowed to form loops using the <code>isParentOf</code> relationship though.</p>
</div>
</li>
<li>
<p>0..M <code>incorporates</code> 0..N <code><a href="#metric">Metric</a></code></p>
<div class="paragraph">
<p>A resource can be associated with metrics. This essentially means that there exists a "causal" relationship between the existence
of the resource and the metric. I.e. the metric is emmitted because it "tells something about" the resource or the resource
logically represents some quality monitored by a metric, etc.</p>
</div>
</li>
<li>
<p>0..1 <code>contains</code> 0..N <code><a href="#metric">Metric</a></code></p>
<div class="paragraph">
<p>In addition to incorporating a metric to a resource, a resource can also outright contain a metric. As explained in the resource
description in the previous chapter, this can be used by the feeds to declare that a metric cannot exist without a resource. I.e.
this is a stronger form of the <code>incorporates</code> between a resource and a metric. Each contained resource is automatically incorporated
by the resource, too.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code><a href="#metadata-pack">Metadata Pack</a></code></p>
<div class="paragraph">
<p>Metadata packs group and "freeze" metadata so that users can be sure they exists in a state they expect.
Metadata packs can associate <strong>GLOBAL</strong> resource types and metric types only. By incorporating a resource/metric type in a metadata pack
it essentially becomes read-only. A membership in a metadata pack ensures that the resource type cannot be modified or deleted.
This can be used to ensure the users that a certain resource/metric type is present in the inventory.</p>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="basic-principles">Basic Principles</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Data is Pushed</dt>
<dd>
<p>All data, including identifiers of the entities, is generated in the clients
of inventory.</p>
<div class="paragraph">
<p>This means that, generally speaking, an entity cannot be uniquely identified by
its, client-generated, ID. To uniquely identify an entity, one has to use its
canonical path.</p>
</div>
</dd>
<dt class="hdlist1">Canonical Paths</dt>
<dd>
<p>A canonical path follows the <code>contains</code> relationships from a tenant down to the
entity in question.</p>
<div class="paragraph">
<p>The canonical path has a form illustrated by the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><strong>/t;</strong><em>tenant-id</em><strong>/e;</strong><em>env-id</em><strong>/r;</strong><em>resource-id</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>The above example is a canonical path to a resource with ID <code>resource-id</code> which
is located in environment <code>env-id</code> which is inside a tenant <code>tenant-id</code>.</p>
</div>
<div class="paragraph">
<p>The type specifiers in the individual path segments can be these:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>t</strong> - tenant</p>
</li>
<li>
<p><strong>e</strong> - environment</p>
</li>
<li>
<p><strong>rt</strong> - resource type</p>
</li>
<li>
<p><strong>mt</strong> - metric type</p>
</li>
<li>
<p><strong>f</strong> - feed</p>
</li>
<li>
<p><strong>r</strong> - resource</p>
</li>
<li>
<p><strong>m</strong> - metric</p>
</li>
<li>
<p><strong>ot</strong> - operation type</p>
</li>
<li>
<p><strong>d</strong> - data entity</p>
</li>
<li>
<p><strong>mp</strong> - metadata pack</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="identity-hashing">Identity Hashing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Inventory is able to establish "identity hashes" of several types of entities (namely resource, metric, resource type,
metric type, operation type, data entity and feed) to enable automatic "linking" of identical entities across the
tenant. This enables the inventory to tell that 2 resource types in 2 feeds are identical or that 2 feeds report
the same resources.</p>
</div>
<div class="paragraph">
<p>Generically, an identity hash is a Merkle tree-hash composed of the ID of the entity (i.e. NOT its canonical path but only its
ID) and the hashes of its child entities (as established by the <code>contains</code> relationship). In addition, data entities
include their ID and the contents of their JSON data in their identity hash.</p>
</div>
<div class="paragraph">
<p>Note that because of the inclusion of the entity&#8217;s ID in the hash an identity hash is more restrictive
than a "content hash". A content hash would be able to tell if 2 otherwise different resources have the same configurations
but an identity hash will tell that the 2 resources have the same ID and the configurations. This is based on
an assumption that like resources should be likely detected and therefore should have the same ID.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration">Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Inventory is configurable using several means.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There are built-in defaults.</p>
</li>
<li>
<p>Configuration can be read from a configuration file</p>
</li>
<li>
<p>Several configuration properties can be overriden using java system properties and environment variables.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Inventory uses a single configuration file even though several different and
independent subsystems are configured using it.</p>
</div>
<div class="paragraph">
<p>First it can be used to override the choice of inventory implementation in case
there are more of them on the classpath.</p>
</div>
<div class="paragraph">
<p>Second,</p>
</div>
<div class="sect2">
<h3 id="locating-config-file">Locating Configuration File</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If there is a system property called <code>hawkular-inventory.conf</code> the value is
supposed to be a path to file from which the configuration will be loaded.</p>
</li>
<li>
<p>If such system property is not defined, the system checks for existence of a
file called <code>.hawkular-inventory.conf</code> in the home directory of the user running
the server.</p>
</li>
<li>
<p>If no such file exists, the default configuration is used.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="configuration-properties">Configuration Properties</h3>
<div class="wider-table-container">
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Available Configuration Properties</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property Name</th>
<th class="tableblock halign-left valign-top">Availability</th>
<th class="tableblock halign-left valign-top">Environment Variable</th>
<th class="tableblock halign-left valign-top">Default Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>This is the property to be used in the configuration file. Also this is the
name of the system property to override the configured value with (if not
specified otherwise)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Some properties are only available for certain components inside inventory
that might or might not be present during the runtime</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>This is the name of the environment variable to override the value</em></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawkular.inventory.impl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>always</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HAWKULAR_INVENTORY_IMPL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully qualified class name of the <code>org.hawkular.inventory.api.Inventory</code>
interface implementation that is accessible on the runtime classpath.
</p><p class="tableblock">If this property is not present, the first implementation available using Java
service loading mechanism is used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawkular.inventory.transaction.retries</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inventory implementation inheriting from
<code>org.hawkular.inventory.base.BaseInventory</code> (this is true by default)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HAWKULAR_INVENTORY_TRANSACTION_RETRIES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The base implementation assumes that the backend storage uses some kind of
optimistic locking for transaction handling. This property defines the number of
retries of transactions if they fail due to locking or concurrent access
situations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawkular.inventory.tinkerpop.graph-provider-impl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inventory implementation based on Tinkerpop3 API (the default)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HAWKULAR_INVENTORY_TINKERPOP_GRAPH_PROVIDER_IMPL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully qualified class name of an implementation of the
<code>org.hawkular.inventory.impl.tinkerpop.spi.GraphProvider</code> interface.
</p><p class="tableblock">Tinkerpop is an API that is implemented by multiple graph databases. This
property can be used to override the default selection mechanism that is to use
the first implementation loaded using the Java services mechanism. Hawkular is
by default packaged with <a href="https://github.com/pietermartin/sqlg">Sqlg</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sql.jdbc.url</code> (system property <code>hawkular.inventory.sql.jdbc.url</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The connection string to the database to store inventory data to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HAWKULAR_INVENTORY_SQL_JDBC_URL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The connection string to the database that will be used to store inventory data to.
</p><p class="tableblock">If the connection string starts with <code>jndi:</code>, the remainder of the connection string is understood to be the object
name of a datasource accessible in the JNDI tree of the Hawkular server (e.g. the default
<code>jndi:java:/jboss/datasources/HawkularInventoryDS_hsqldb</code>). Otherwise this can be a connection string to any database
supported by Sqlg. As of the time of writing, this is Postgresql, H2 and HSQLDB (e.g.
<code>jdbc:postgresql://localhost/hawkular</code>). In the case of a "normal" JDBC connection, it will usually be necessary to
also provide the username and password. If the connection is obtained from JNDI there is no need to provide the
credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sql.jdbc.username</code> (system property <code>hawkular.inventory.sql.jdbc.username</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name to use when connecting using a normal JDBC connection.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HAWKULAR_INVENTORY_SQL_JDBC_USERNAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user name to use when connecting using a normal JDBC connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sql.jdbc.password</code> (system property <code>hawkular.inventory.sql.jdbc.password</code>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password to use when connecting using a normal JDBC connection.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HAWKULAR_INVENTORY_SQL_JDBC_PASSWORD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password to use when connecting using a normal JDBC connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawkular.allowed-cors-origins</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated list of addresses (including schema) allowed to interact with the inventory REST API from the browser.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALLOWED_CORS_ORIGINS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This configuration is shared with Hawkular Metrics and Hawkular Alerts and sets up the addresses allowed to
interact with the inventory from the browser in cross-origin manner. By default any address is allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawkular.allowed-cors-access-control-allow-headers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated additional headers allowed to be passed in CORS requests from browser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ALLOWED_CORS_ACCESS_CONTROL_ALLOW_HEADERS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>undefined</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Again, this is shared with Hawkular Metrics and Hawkular Alerts and specifies additional headers (apart from the default
ones required for inventory to function properly) that can be passed to Hawkular Inventory in CORS requests. This is
an advanced configuration that you usually don&#8217;t have alter.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
      </div>
    </section>

		</div>
		<div id="push"></div>
    </div>

    <section class="redhat clearfix">
      <div class="container">
        <p class="pull-left">
          <a href="http://www.redhat.com/">
            <img alt="redhatlogo-white" src="../../../..//img/redhatlogo-white.png" width="130">
          </a>
        </p>
        <p class="muted credit pull-right">
				  &copy; 2016 | Hawkular is released under <a href="/license.html">Apache License v2.0</a>
					<a href="https://twitter.com/hawkular_org" class="twitter-follow-button" data-show-count="false" data-size="medium">Follow @hawkular_org</a>
				  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
					<iframe src="https://ghbtns.com/github-btn.html?user=hawkular&repo=hawkular-services&type=star" frameborder="0" scrolling="0" class="github-stars-btn"></iframe>
				</p>

    <!--p id="forkongithubp"><span id="forkongithub">
      <a href="https://github.com/hawkular" class="bg-grey">
        Fork me on GitHub
      </a>
    </span></p-->
      </div>
    </section>

    <!-- javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- js -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="../../../../js/jbossorg-tabzilla.js"></script>
    <script src="../../../../js/behavior.js"></script>
    <script src="../../../../js/prettify.js"></script>
    <script src="../../../../js//ekko-lightbox.min.js"></script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'hawkular';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61728352-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
