<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Hawkular - Introduction to AutoResolve triggers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- css -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="../../../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../../../css/asciidoctor.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link href="../../../../css/tabzilla.css" rel="stylesheet">
    <link href="../../../../css/styles.css" rel="stylesheet">
    <link href="../../../../css/prettify.css" rel="stylesheet">
    <link href="../../../../css/ekko-lightbox.min.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
    <script src="../../../../js/moment.min.js"></script>
    <script src="../../../../js/jquery-1.11.2.min.js"></script>

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../../../../favicon.ico">
    
  </head>
  <body onload="prettyPrint()" data-spy="scroll" data-offset="80" data-target="#toc">
    <div id="wrap">
      <div class="dropup">
        <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
        <script>
            window.addEventListener('load', function() {
                 renderTabzilla("Hawkular", "https://hawkular.github.io", true );
            }, false);
        </script>
      </div>
	
    	<!-- Fixed navbar -->
        <nav class="navbar navbar-fixed-top" role="navigation">
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button class="navbar-toggle collapsed" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../index.html">Home</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li><a href="../../../../index.html">Hawkular</a></li>
                <li><a href="../../../../docs/overview.html">Overview</a></li>
                <li><a href="../../../../docs/user/quick-start.html">Quick Start</a></li>
                <li class=""><a href="../../../../downloads.html">Downloads</a></li>
                <li class="dropdown">
                  <a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                    Metrics<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu" role="menu">
                    <li>
                      <a href="../../../../docs/components/metrics/index.html">User Guide</a>
                    </li>
                    <li>
                      <a href="../../../../docs/rest/rest-metrics.html">REST API</a>
                    </li>
                  </ul>
                </li>
                <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                  Documentation
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="../../../../docs/user/user-guide.html">User Guide</a>
                  </li>
                  <li>
                    <a href="../../../../docs/user/installation-guide.html">Installation Guide</a>
                  </li>
                  <!--li>
                    <a href="../../../../docs/dev/terms.html">Used Terms</a>
                  </li-->
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">REST API</a>
                    <ul class="dropdown-menu">
                      <li class="menu-item ">
                        <a href="../../../../docs/rest/rest-alerts.html">Alerts</a>
                      </li>
                      <li class="menu-item ">
                        <a href="https://hawkular.gitbooks.io/hawkular-apm-user-guide/content/apiref/rest-apm.html">Application Performance Management</a>
                      </li>
                        <li class="menu-item ">
                            <a href="../../../../docs/rest/rest-datamining.html">Data Mining</a>
                        </li>
                      <li class="menu-item ">
                        <a href="../../../../docs/rest/rest-inventory.html">Inventory</a>
                      </li>
                      <li class="menu-item ">
                        <a href="../../../../docs/rest/rest-metrics.html">Metrics</a>
                      </li>
                    </ul>
                  </li>
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="javascript:;" onclick="return false;" class="dropdown-toggle" data-toggle="dropdown">Sub-projects</a>
                    <ul class="dropdown-menu">
                      <li class="menu-item ">
                        <a href="../../../../docs/components/alerts/index.html">Alerts</a>
                      </li>
                      <li class="menu-item ">
                        <a href="https://hawkular.gitbooks.io/hawkular-apm-user-guide/content/">Application Performance Management</a>
                      </li>
                      <li class="menu-item ">
                        <a href="../../../../docs/components/datamining/index.html">Data Mining</a>
                      </li>
                      <li class="menu-item ">
                        <a href="../../../../docs/components/inventory/index.html">Inventory</a>
                      </li>
                      <li class="menu-item ">
                        <a href="../../../../docs/components/metrics/index.html">Metrics</a>
                      </li>
                    </ul>
                  </li>
                </ul>
                <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                  Community
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="../../../../community/index.html">Home</a>
                  </li>
                  <li>
                    <a href="../../../../community/join.html">Join</a>
                  </li>
                  <li>
                    <a href="../../../../license.html">License</a>
                  </li>
                  <li>
                    <a href="../../../../docs/dev/development.html">Developer Guide</a>
                  </li>
                  <li>
                    <a href="https://travis-ci.org/hawkular">CI Builds</a>
                  </li>
                </ul></li>
                <li class=""><a href="../../../../blog.html">Blog</a></li>
              </ul>
            </div>
          </div>
        </nav>

    <section class="main-banner blog-mainbanner">
        <div class="container">
            <h1>Introduction to AutoResolve triggers</h1>
            <p>blog post</p>
        </div>
    </section>

    <div class="blog-container">
        <br/><br/>
    	<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Hawkular Alerts provide a simple Alert life-cycle management and an automated Alert resolution as core features.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_alert_lifecycle">Alert Lifecycle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Triggers are defined to detect problems. When a problem happens a new alert is generated by the engine
with the information about the data that matched the defined conditions. Also an Alert provides a simple lifecycle to
indicate the status of the problem.</p>
</div>
<div class="paragraph">
<p>A new Alert starts with <strong>OPEN</strong> status, optionally moves to <strong>ACKNOWLEDGED</strong> to indicate the alert has been seen and the
issue is being resolved, and is finally set to <strong>RESOLVED</strong> to indicate that the problem has been fixed.</p>
</div>
<div class="paragraph">
<p>Alert lifecycle can be handled manually or can be managed automatically by the AutoResolve tooling.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autoresolve_triggers">AutoResolve triggers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A trigger has one or multiple conditions that are set to detect a problem. When incoming data matches the
condition expresions an alert is fired to inform about this new issue. In this context, if the engine is still
receiving data, new alerts will be generated even if it refers to the <strong>same</strong> problem.</p>
</div>
<div class="paragraph">
<p>The detection of multiple alerts belonging to the <strong>same</strong> problem can be controlled with fine granularity.</p>
</div>
<div class="paragraph">
<p>Hawkular Alerts allow to define that once a problem triggered an alert, the trigger is not going to evaluate more data
until the issue is resolved to avoid repeated alerts for the same issue.</p>
</div>
<div class="paragraph">
<p>Resolution of a problem can be done manually or automatically using <strong>AUTORESOLVE</strong> triggers.</p>
</div>
<div class="paragraph">
<p>A trigger defines conditions that are responsible to detect a problem. These conditions are called <strong>FIRING</strong> conditions
in Hawkular Alerts. Optionally, a trigger can define conditions that are responsible to detect when the problem is
gone. These new ones are called <strong>AUTORESOLVE</strong> conditions. So, in the engine a trigger will be in <strong>FIRING</strong> mode when it
is evaluating data to detect a problem while it will be a in <strong>AUTORESOLVE</strong> mode when it is evaluating data to detect that
the problem is no longer present.</p>
</div>
<div class="paragraph">
<p>These combination of <strong>FIRING</strong> and <strong>AUTORESOLVE</strong> conditions ensures that only <strong>one alert</strong> is generated for a problem
and when the problem is resolved the trigger automatically returns to firing mode.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_of_alerting_on_process_availability">Example of alerting on process availability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s define a simple example to show how AutoResolve triggers work.</p>
</div>
<div class="paragraph">
<p>In <a href="https://github.com/lucasponce/hawkular-examples/blob/master/extended-tests/process-autoresolve/create-definition-check-process.sh">create-definition-check-process.sh</a> bash script
we have defined an AutoResolve trigger activating flags <strong>autoResolve</strong> and <strong>autoResolveAlerts</strong>.</p>
</div>
<div class="paragraph">
<p>This fragment shows how to mark a trigger as AutoResolve:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-json" data-lang="json">{
 "id": "check-firefox-process",
 "name": "Firefox process",
 "description": "Check availability firefox process",
 "actions": {
   "email": ["my-group-to-notify"]
 },
 "firingMatch": "ALL",
 "autoResolveMatch": "ALL",
 "enabled": true,
 "autoDisable": false,
 "autoEnable": false,
 "autoResolve": true, <b class="conum">(1)</b>
 "autoResolveAlerts": true, <b class="conum">(2)</b>
 "severity": "HIGH"
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>autoResolve</strong> flag set to <strong>true</strong> indicates that the trigger will activate <strong>FIRING</strong> and <strong>AUTORESOLVE</strong> modes. Flag set
to <strong>false</strong> will run the trigger only in <strong>FIRING</strong> mode.</p>
</li>
<li>
<p><strong>autoResolveAlerts</strong> flag set to <strong>true</strong> will automatically mark all unresolved alerts (for the trigger) as <strong>resolved</strong>
when <strong>AUTORESOLVE</strong> trigger detect problem is gone. Flag set to <strong>false</strong> will not modify the alert lifecycle.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And the next fragment will show how to declare <strong>FIRING</strong> and <strong>AUTORESOLVE</strong> conditions linked with the trigger:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-json" data-lang="json">{
 "triggerMode": "FIRING", <b class="conum">(1)</b>
 "type": "AVAILABILITY",
 "dataId": "firefox-process",
 "operator": "NOT_UP"
}

...

{
 "triggerMode": "AUTORESOLVE", <b class="conum">(2)</b>
 "type": "AVAILABILITY",
 "dataId": "firefox-process",
 "operator": "UP"
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><strong>triggerMode</strong> indicates in which mode will this condition be executed, <strong>FIRING</strong> mode is used to detect the
problem we want to alert. In our example, it is an occurence of the Firefox process not being up.</p>
</li>
<li>
<p><strong>AUTORESOLVE</strong> conditions are executed to detect when the probem is not present.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Finally, in <a href="https://github.com/lucasponce/hawkular-examples/blob/master/extended-tests/process-autoresolve/send-data-check-process.sh">send-data-check-process.sh</a>
bash script we show how we can check and send availability data about process we want to monitor.</p>
</div>
<div class="paragraph">
<p>The format of the payload is shown in the next fragment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-json" data-lang="json">{
 "availability": [
    {"id": "firefox-process", <b class="conum">(1)</b>
     "type": "AVAILABILITY",
     "timestamp": $timestamp,
     "value": "$firefox_availability"
     }
 ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This <strong>id</strong> should match the <strong>dataId</strong> field defined in the conditions.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Examples can be run using <a href="/blog/2015/08/19/hawkular-alerts-standalone.html">Hawkular Alerts in Standalone</a>
deployment used in the previous post.</p>
</div>
<div class="paragraph">
<p>More details about Hawkular Alerts features can be found at</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="/docs/dev/alerts.html">Hawkular Alerts Developer Guide</a></p>
</li>
<li>
<p><a href="/docs/rest/rest-alerts.html">Hawkular Alerts REST API</a></p>
</li>
</ul>
</div>
</div>
</div></p>
    	<hr /><br /><br />
        <p><em>Published by Lucas Ponce on  25 August 2015</em></p>

    <div id="disqus_thread"></div>
        <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        var disqus_shortname = 'hawkular';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>

		</div>
		<div id="push"></div>
    </div>

    <section class="redhat clearfix">
      <div class="container">
        <p class="pull-left">
          <a href="http://www.redhat.com/">
            <img alt="redhatlogo-white" src="../../../..//img/redhatlogo-white.png" width="130">
          </a>
        </p>
        <p class="muted credit pull-right">&copy; 2015 | Hawkular is released under <a href="/license.html">Apache License v2.0</a></p>
    <p id="forkongithubp"><span id="forkongithub">
      <a href="https://github.com/hawkular" class="bg-grey">
        Fork me on GitHub
      </a>
    </span></p>
      </div>
    </section>

    <!-- javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- js -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="../../../../js/jbossorg-tabzilla.js"></script>
    <script src="../../../../js/behavior.js"></script>
    <script src="../../../../js/prettify.js"></script>
    <script src="../../../../js//ekko-lightbox.min.js"></script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'hawkular';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61728352-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
